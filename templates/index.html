<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prompt Polisher</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>

  <!-- Red band -->
  <header class="band">
    <div class="band-inner">
      <div class="charles">
        <img src="/static/framed-charles.png" alt="Charles" onerror="this.style.display='none'">
      </div>
      <h1 class="title">Prompt Polisher</h1>
    </div>
  </header>

  <!-- Intro (black text) -->
  <section class="intro">
    <p><strong>Hello!</strong></p>
    <p>Writing good prompts can be tricky sometimes and if your first attempt is vague, you often get weak results and that wastes your time.</p>
    <p>That’s where I can help because if you paste or type your messy draft into the box and click <em>Polish My Prompt</em>, I’ll instantly rework it into a sharp prompt you can drop straight into ChatGPT (or any other AI tool).</p>
    <p>This will save you time, improve the quality of your answers and make AI work better for you.</p>
    <p>Give it a go and you can use it as often as you want.</p>
    <p class="signoff">Ciao for now…<br>Charles</p>
  </section>

  <!-- Main: side-by-side, equal width -->
  <main class="wrap">
    <div class="prompt-container">
      <!-- Input card -->
      <section class="card">
        <h2>Your prompt</h2>
        <p class="muted">Paste or type your rough prompt, then click the button.</p>
        <form id="form">
          <textarea name="prompt" placeholder="Paste your prompt here..."></textarea>
          <div class="actions">
            <button class="btn" type="submit">Polish My Prompt</button>
            <span id="status" class="status">Ready</span>
          </div>
        </form>
      </section>

      <!-- Output card -->
      <section class="card">
        <div class="out-head">
          <div class="out-title">Polished prompt</div>
          <button id="copy" class="copy" type="button">Copy</button>
        </div>
        <div id="out-text" class="out-text">—</div>
      </section>
    </div>
  </main>

  <footer class="footer">Powered by The Beacon</footer>
  <div id="toast" class="toast">Copied</div>

  <script>
    const form     = document.getElementById('form');
    const outEl    = document.getElementById('out-text');
    const statusEl = document.getElementById('status');
    const copyBtn  = document.getElementById('copy');
    const toast    = document.getElementById('toast');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusEl.textContent = 'Working…';
      const data = new FormData(form);
      try {
        const res  = await fetch('/api/polish', { method: 'POST', body: data });
        const json = await res.json();
        if (json.ok) {
          outEl.textContent = json.response || 'No content';
          statusEl.textContent = 'Done';
        } else {
          outEl.textContent = json.error || 'Error';
          statusEl.textContent = 'Error';
        }
      } catch (err) {
        outEl.textContent = String(err);
        statusEl.textContent = 'Network error';
      }
    });

    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(outEl.textContent);
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 900);
      } catch {}
    });
  </script>
</body>
</html>
