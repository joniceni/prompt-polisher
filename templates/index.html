<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Charles’ Prompt Polisher</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{
      --red:#E11D2E;        /* accent red */
      --dark:#111;          /* near-black */
      --mid:#444;           /* mid grey text */
      --light:#f6f7f9;      /* light background */
      --card:#fff;          /* card background */
      --shadow:0 10px 25px rgba(0,0,0,.10);
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial,sans-serif;
      color:var(--dark);
      background:#fff;
    }
    header{
      background:var(--red);
      color:#fff;
      padding:28px 20px 56px;
      text-align:center;
      position:relative;
    }
    header h1{
      font-family:"Playfair Display",serif;
      font-weight:700;
      letter-spacing:.2px;
      margin:10px 0 8px;
      font-size: clamp(28px, 4vw, 44px);
    }
    header p{
      margin:0 auto;
      max-width:900px;
      line-height:1.55;
      font-size:clamp(15px, 2.2vw, 18px);
      opacity:.95;
    }
    .brand{
      display:flex; align-items:center; justify-content:center; gap:16px;
    }
    .brand img{
      width:110px; height:110px; object-fit:cover; background:#fff;
      border:3px solid #fff; border-radius:12px; box-shadow: var(--shadow);
    }
    main{
      margin:-40px auto 60px;
      max-width:980px;
      padding:0 18px;
    }
    .card{
      background:var(--card);
      box-shadow: var(--shadow);
      border-radius:var(--radius);
      padding:26px;
    }
    .intro{
      color:var(--mid);
      font-size:16px;
      line-height:1.65;
      max-width:900px;
      margin:0 auto 20px;
    }
    .intro b{ color:var(--red); }
    .sig{
      margin:24px 0 14px;
      font-family:"Playfair Display",serif;
      font-style:italic;
      font-size:20px;
      color:var(--mid);
    }

    .form{
      margin-top:14px;
    }
    textarea{
      width:100%;
      min-height:150px;
      padding:16px 18px;
      font: 16px/1.5 Inter, system-ui, sans-serif;
      color:var(--dark);
      background:#fff;
      border:2px solid var(--red);
      border-radius:12px;
      outline:none;
      box-shadow: 0 6px 18px rgba(225,29,46,.10);
      transition:border-color .15s ease, box-shadow .15s ease, transform .02s ease-in;
    }
    textarea:focus{
      border-color:#c31423;
      box-shadow:0 8px 22px rgba(225,29,46,.16);
    }

    .actions{
      margin-top:18px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;
    }
    button{
      appearance:none; border:none; cursor:pointer;
      background:var(--red); color:#fff;
      font-weight:700; letter-spacing:.2px;
      padding:12px 18px; border-radius:999px;
      box-shadow:0 8px 20px rgba(225,29,46,.25);
      transition: transform .06s ease, box-shadow .15s ease, filter .15s ease;
    }
    button:hover{ filter:brightness(.97); box-shadow:0 10px 26px rgba(225,29,46,.32); }
    button:active{ transform: translateY(1px); }

    .out{
      margin-top:18px;
      background:#fff;
      border:1px solid #e7e7ea;
      border-radius:12px;
      padding:16px;
      min-height:72px;
      font: 15px/1.6 Inter,sans-serif;
      color:var(--dark);
      box-shadow: var(--shadow);
      white-space:pre-wrap;
    }
    .copy{
      margin-left:auto;
      background:#fff; color:var(--red);
      border:1px solid var(--red);
      box-shadow:none;
    }

    footer{
      text-align:center; padding:26px 10px 40px; color:#888; font-size:14px;
    }
    footer a{ color:var(--red); text-decoration:none; font-weight:700; }
  </style>
</head>
<body>

<header>
  <div class="brand">
    <!-- If your image file is named differently, change the filename below. -->
    <img src="{{ url_for('static', filename='Framed Charles.png') }}" alt="Charles">
    <h1>Charles’ Prompt Polisher</h1>
  </div>
  <p>Paste your rough idea and click <b>Polish My Prompt</b>. I’ll turn it into a sharp prompt you can drop into ChatGPT.</p>
</header>

<main>
  <div class="card">
    <p class="intro">
      Writing good prompts can be tricky. If your first attempt is vague, you often get weak results — and that wastes time.
      Paste your messy draft below and hit <b>Polish My Prompt</b>. I’ll instantly rework it into a clear, effective prompt.
    </p>
    <div class="sig">Ciao for now… — Charles</div>

    <div class="form">
      <textarea id="draft" placeholder="Paste or type your rough prompt here…"></textarea>

      <div class="actions">
        <button id="go">Polish My Prompt</button>
        <button class="copy" id="copy">Copy</button>
      </div>

      <div id="out" class="out"></div>
    </div>
  </div>
</main>

<footer>Powered by <a href="#" aria-label="The Beacon">The Beacon</a></footer>

<script>
  const goBtn   = document.getElementById("go");
  const copyBtn = document.getElementById("copy");
  const draftEl = document.getElementById("draft");
  const outEl   = document.getElementById("out");

  async function polish() {
    const text = draftEl.value.trim();
    if (!text) { outEl.textContent = "Please enter something to polish."; return; }

    goBtn.disabled = true;
    goBtn.textContent = "Polishing…";
    outEl.textContent = "";

    try {
      const r = await fetch("/polish", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text })
      });
      const data = await r.json();

      if (!r.ok) {
        outEl.textContent = (data && data.error) ? data.error : "Error: Unable to polish the prompt.";
      } else {
        outEl.textContent = data.polished || "No result.";
      }
    } catch (err) {
      outEl.textContent = "Network error. Please try again.";
    } finally {
      goBtn.disabled = false;
      goBtn.textContent = "Polish My Prompt";
    }
  }

  function copyOut() {
    const text = outEl.textContent.trim();
    if (!text) return;
    navigator.clipboard.writeText(text).then(() => {
      copyBtn.textContent = "Copied!";
      setTimeout(() => copyBtn.textContent = "Copy", 1200);
    });
  }

  goBtn.addEventListener("click", polish);
  copyBtn.addEventListener("click", copyOut);
</script>

</body>
</html>
